#pragma rtGlobals=1		// Use modern global access method.Menu "GL"	"Do It All Waves", DoItAllWaves()EndFunction DoItAllWaves()		String WaveNameFormat=StrVarOrDefault("root:GL_Globals:DoItAll:GWaveNameFormat", "PMP*")	String FunctionNameString=StrVarOrDefault("root:GL_Globals:DoItAll:GFunctionNameString", "")	String EDate=""//StrVarOrDefault("ExpDate", "")	Prompt WaveNameFormat, "Please specify the wave name format:"	Prompt EDate, "Please specify the date on which this experiment was performed (format: 9.03.15)"	Prompt FunctionNameString, "Please specify the function name:", popup, FunctionList("*_batch",";","")	DoPrompt "Do It All Waves", WaveNameFormat, EDate, FunctionNameString	String/G ExpDate = EDate	if (V_flag==1)		Abort	endif	NewDataFolder/O root:GL_Globals	NewDataFolder/O root:GL_Globals:DoItAll	String/G root:GL_Globals:DoItAll:GWaveNameFormat=WaveNameFormat	String/G root:GL_Globals:DoItAll:GFunctionNameString=FunctionNameString			String AllWaveNameList=WaveList(WaveNameFormat,";","")		if (strlen(AllWaveNameList)==0)		Print "No specified waves are found in current folder!"		Abort	endif		String WaveNameString=""	Make/D/O/N=0 Results	Make/T/O/N=0 WaveNamesAll	Variable i=0	FUNCREF myprotofunc f=$FunctionNameString	Do 		WaveNameString=StringFromList(i, AllWaveNameList)		InsertPoints numpnts(Results), 1, Results		Results[numpnts(Results)-1]=f($WaveNameString)		InsertPoints numpnts(WaveNamesAll), 1, WaveNamesAll		WaveNamesAll[numpnts(WaveNamesAll)-1]=WaveNameString				i=i+1	While (strlen(StringFromList(i, AllWaveNameList))!=0)	String ResultsWaveString="r_"+FunctionNameString	WaveStats/Q/Z Results	//Print V_avg, V_sdev	Duplicate/O Results, $ResultsWaveString	ResultsWaveString="WaveName_"+FunctionNameString	Duplicate/O WaveNamesAll, $ResultsWaveString	KillWaves/Z Results, WaveNamesAllEndFunction myprotofunc(w)	Wave w	Print "No function found."End